erp-platform/
â”‚
â”œâ”€â”€ buildSrc/                                    # Gradle build logic & conventions
â”‚   â”œâ”€â”€ src/main/kotlin/
â”‚   â”‚   â”œâ”€â”€ dependencies.gradle.kts
â”‚   â”‚   â”œâ”€â”€ kotlin-conventions.gradle.kts
â”‚   â”‚   â”œâ”€â”€ quarkus-conventions.gradle.kts
â”‚   â”‚   â””â”€â”€ native-image-conventions.gradle.kts
â”‚   â””â”€â”€ build.gradle.kts
â”‚
â”œâ”€â”€ platform-shared/                             # Shared Kernel (cross-cutting)
â”‚   â”œâ”€â”€ common-types/
â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚       â””â”€â”€ com.erp.shared.types/
â”‚   â”‚           â”œâ”€â”€ valueobjects/
â”‚   â”‚           â”‚   â”œâ”€â”€ Money.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ Currency.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ Quantity.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ Address.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ PhoneNumber.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ Email.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ TaxId.kt
â”‚   â”‚           â”‚   â””â”€â”€ AuditInfo.kt
â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚           â”‚   â”œâ”€â”€ DomainEvent.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ EventMetadata.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ EventEnvelope.kt
â”‚   â”‚           â”‚   â””â”€â”€ EventVersion.kt
â”‚   â”‚           â”œâ”€â”€ results/
â”‚   â”‚           â”‚   â”œâ”€â”€ Result.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ DomainError.kt
â”‚   â”‚           â”‚   â””â”€â”€ ValidationError.kt
â”‚   â”‚           â”œâ”€â”€ aggregate/
â”‚   â”‚           â”‚   â”œâ”€â”€ AggregateRoot.kt
â”‚   â”‚           â”‚   â”œâ”€â”€ Entity.kt
â”‚   â”‚           â”‚   â””â”€â”€ ValueObject.kt
â”‚   â”‚           â””â”€â”€ cqrs/
â”‚   â”‚               â”œâ”€â”€ Command.kt
â”‚   â”‚               â”œâ”€â”€ Query.kt
â”‚   â”‚               â”œâ”€â”€ CommandHandler.kt
â”‚   â”‚               â””â”€â”€ QueryHandler.kt
â”‚   â”‚
â”‚   â”œâ”€â”€ common-messaging/
â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚       â””â”€â”€ com.erp.shared.messaging/
â”‚   â”‚           â”œâ”€â”€ EventPublisher.kt
â”‚   â”‚           â”œâ”€â”€ EventConsumer.kt
â”‚   â”‚           â”œâ”€â”€ EventBus.kt
â”‚   â”‚           â”œâ”€â”€ CommandBus.kt
â”‚   â”‚           â”œâ”€â”€ QueryBus.kt
â”‚   â”‚           â””â”€â”€ kafka/
â”‚   â”‚               â”œâ”€â”€ KafkaConfiguration.kt
â”‚   â”‚               â”œâ”€â”€ KafkaProducer.kt
â”‚   â”‚               â”œâ”€â”€ KafkaConsumer.kt
â”‚   â”‚               â””â”€â”€ SchemaRegistry.kt
â”‚   â”‚
â”‚   â”œâ”€â”€ common-security/
â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚       â””â”€â”€ com.erp.shared.security/
â”‚   â”‚           â”œâ”€â”€ TenantContext.kt
â”‚   â”‚           â”œâ”€â”€ AuthenticationPrincipal.kt
â”‚   â”‚           â”œâ”€â”€ Authorization.kt
â”‚   â”‚           â”œâ”€â”€ SecurityContext.kt
â”‚   â”‚           â””â”€â”€ PermissionChecker.kt
â”‚   â”‚
â”‚   â””â”€â”€ common-observability/
â”‚       â””â”€â”€ src/main/kotlin/
â”‚           â””â”€â”€ com.erp.shared.observability/
â”‚               â”œâ”€â”€ CorrelationId.kt
â”‚               â”œâ”€â”€ TraceContext.kt
â”‚               â”œâ”€â”€ MetricsCollector.kt
â”‚               â””â”€â”€ StructuredLogging.kt
â”‚
â”œâ”€â”€ bounded-contexts/
â”‚   â”œâ”€â”€ finance/                                # ğŸ”µ CORE ERP FINANCE - Port 8081
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ finance-gl/                          # General Ledger Subdomain (ADR-009)
â”‚   â”‚   â”‚   â”œâ”€â”€ gl-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.finance.gl.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ledger/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ GeneralLedger.kt       # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ LedgerId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ LedgerType.kt          # Primary, Secondary, Statistical
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ LedgerStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ LedgerPeriod.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ chartofaccounts/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ChartOfAccounts.kt     # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ChartId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Account.kt             # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AccountId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AccountType.kt         # Asset, Liability, Equity, Revenue, Expense
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AccountGroup.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AccountHierarchy.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ NaturalAccount.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ AccountSegment.kt      # Company, CostCenter, Department, Project
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ journal/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ JournalEntry.kt        # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ JournalEntryId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ JournalLine.kt         # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ JournalLineId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ JournalType.kt         # Standard, Recurring, Reversing, Statistical
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ JournalStatus.kt       # Draft, Pending, Posted, Reversed
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PostingKey.kt          # Debit/Credit indicator
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DocumentReference.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ JournalSource.kt       # Manual, SubLedger, Integration
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ period/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ FiscalYear.kt          # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ FiscalYearId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ FiscalPeriod.kt        # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PeriodId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PeriodStatus.kt        # Open, Soft-Close, Hard-Close
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PeriodType.kt          # Monthly, Quarterly, Annual, Adjustment
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ PeriodLock.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ balance/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AccountBalance.kt      # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BalanceId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PeriodBalance.kt       # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OpeningBalance.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ClosingBalance.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DebitTotal.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditTotal.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ BalanceType.kt         # YTD, PTD, QTD
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ currency/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CurrencyCode.kt        # Value Object (ISO 4217)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ExchangeRate.kt        # Value Object
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ExchangeRateType.kt    # Spot, Average, Historical
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ FunctionalCurrency.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ReportingCurrency.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CurrencyTranslation.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ company/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ LegalEntity.kt         # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CompanyCode.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CompanyId.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TaxJurisdiction.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ FiscalCalendar.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ ReportingEntity.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ JournalEntryPostedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ JournalEntryReversedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PeriodClosedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PeriodReopenedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ BalanceRecalculatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ AccountCreatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ AccountDeactivatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ExchangeRateUpdatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ TrialBalanceGeneratedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ UnbalancedJournalException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PeriodClosedException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ AccountNotFoundException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvalidPostingKeyException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CurrencyMismatchException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ FiscalYearLockedException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ JournalValidationService.kt    # Domain Service
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ BalanceCalculationService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ CurrencyTranslationService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ PeriodControlService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ TrialBalanceService.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ IntercompanyMatchingService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ gl-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.finance.gl.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS (Write Operations)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ PostJournalEntryCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ReverseJournalEntryCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateRecurringJournalCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateAccountCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ UpdateAccountCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ DeactivateAccountCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ OpenPeriodCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ClosePeriodCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ReopenPeriodCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ UpdateExchangeRateCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateLegalEntityCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ RecalculateBalancesCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES (Read Operations)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetTrialBalanceQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetAccountBalanceQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetJournalEntriesQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetJournalEntryByIdQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetChartOfAccountsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetAccountDetailsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetPeriodStatusQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetFiscalYearQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetExchangeRatesQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetLedgerSummaryQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ GetBalanceSheetQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/                  # Driven Ports (Infrastructure)
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ JournalEntryRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AccountRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ FiscalPeriodRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ BalanceRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ExchangeRateRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ LegalEntityRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ JournalEntryReadRepository.kt     # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TrialBalanceReadRepository.kt     # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ BalanceSheetReadRepository.kt     # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ SubLedgerIntegrationPort.kt       # AR, AP, FA integration
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TaxServicePort.kt                 # Tax calculation
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ IntercompanyPort.kt               # IC transactions
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ConsolidationPort.kt              # Multi-entity rollup
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AuditTrailPort.kt                 # Immutable audit log
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ JournalEntryCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ AccountCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ PeriodCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ ExchangeRateCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ LegalEntityCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ TrialBalanceQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ JournalEntryQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ AccountQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ PeriodQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ BalanceSheetQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ gl-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.finance.gl.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/                    # Primary Adapters
â”‚   â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ JournalEntryResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ AccountResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ PeriodResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ TrialBalanceResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ BalanceSheetResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ ExchangeRateResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”œâ”€â”€ request/       # Command DTOs
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ PostJournalEntryRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ CreateAccountRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ClosePeriodRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UpdateExchangeRateRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â””â”€â”€ response/      # Query DTOs
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ JournalEntryDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ JournalLineDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ AccountDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ TrialBalanceDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ BalanceSheetDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â””â”€â”€ PeriodStatusDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ event/
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ SubLedgerEventConsumer.kt     # AR/AP/FA postings
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ InventoryEventConsumer.kt     # Inventory valuations
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ PayrollEventConsumer.kt       # HR payroll postings
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/                   # Secondary Adapters
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/              # Write model (normalized)
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ JournalEntryJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ AccountJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ BalanceJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ JournalEntryEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ JournalLineEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ AccountEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ FiscalPeriodEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ BalanceEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ ExchangeRateEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â””â”€â”€ LegalEntityEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ JournalEntryJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ AccountJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ BalanceJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ FiscalPeriodJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ reporting/        # Read model (denormalized)
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ TrialBalanceReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ BalanceSheetReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ ProfitLossReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ document/
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ TrialBalanceDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ BalanceSheetDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â””â”€â”€ JournalRegisterDocument.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ audit/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ ImmutableAuditLogAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ AuditTrailEntity.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ integration/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ ARSubLedgerAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ APSubLedgerAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ FASubLedgerAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ InventoryValuationAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ kafka/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ GLEventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ GLEventConsumer.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ schema/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ JournalPostedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ PeriodClosedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ BalanceUpdatedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ outbox/
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ GLOutboxEventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ client/
â”‚   â”‚   â”‚               â”‚           â”œâ”€â”€ TaxServiceClient.kt
â”‚   â”‚   â”‚               â”‚           â”œâ”€â”€ IntercompanyClient.kt
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ ConsolidationClient.kt
â”‚   â”‚   â”‚               â”œâ”€â”€ configuration/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ GLDependencyInjection.kt
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ PersistenceConfiguration.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ MessagingConfiguration.kt
â”‚   â”‚   â”‚               â””â”€â”€ resources/
â”‚   â”‚   â”‚                   â”œâ”€â”€ application.yml
â”‚   â”‚   â”‚                   â”œâ”€â”€ application-dev.yml
â”‚   â”‚   â”‚                   â”œâ”€â”€ application-prod.yml
â”‚   â”‚   â”‚                   â””â”€â”€ db/
â”‚   â”‚   â”‚                       â””â”€â”€ migration/
â”‚   â”‚   â”‚                           â”œâ”€â”€ V1__create_gl_schema.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V2__create_journal_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V3__create_account_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V4__create_balance_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V5__create_period_tables.sql
â”‚   â”‚   â”‚                           â””â”€â”€ V6__create_audit_tables.sql
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ finance-ar/                          # Accounts Receivable Subdomain (ADR-009)
â”‚   â”‚   â”‚   â”œâ”€â”€ ar-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.finance.ar.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ customer/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CustomerAccount.kt       # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CustomerAccountId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CustomerType.kt          # Individual, Corporate, Government
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditProfile.kt         # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditLimit.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditStatus.kt          # Good, Warning, Hold, Blocked
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentTerms.kt          # Net30, Net60, 2/10Net30
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningProfile.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CustomerSegment.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ invoice/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Invoice.kt               # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceLine.kt           # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceLineId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceType.kt           # Standard, Credit, Debit, ProForma
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceStatus.kt         # Draft, Posted, PartialPaid, Paid, Cancelled
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BillingAddress.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ShippingAddress.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ TaxDetail.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ InvoiceReference.kt      # SO, Contract, Project link
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ payment/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Payment.kt               # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentAllocation.kt     # Entity (payment-to-invoice)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentMethod.kt         # Cash, Check, Wire, ACH, Card
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentStatus.kt         # Pending, Applied, Reversed, Bounced
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BankReference.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Remittance.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CashDiscount.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ aging/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AgingBucket.kt           # Value Object
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AgingSnapshot.kt         # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AgingPeriod.kt           # Current, 1-30, 31-60, 61-90, 90+
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DaysOutstanding.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ AgingCategory.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ dunning/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningRun.kt            # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningRunId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningNotice.kt         # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningLevel.kt          # Reminder, Warning, Final, Legal
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningAction.kt         # Letter, Email, Call, Block
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CollectionCase.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ credit/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditMemo.kt            # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditMemoId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditReason.kt          # Return, Pricing, Quality, Goodwill
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DebitMemo.kt             # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ WriteOff.kt              # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ lockbox/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ LockboxBatch.kt          # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ LockboxItem.kt           # Entity
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ RemittanceMatch.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ ExceptionItem.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvoicePostedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvoiceCancelledEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentReceivedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentAppliedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentReversedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CreditMemoIssuedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ WriteOffApprovedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ DunningNoticeGeneratedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CreditLimitExceededEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CustomerBlockedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ AgingSnapshotCreatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvoiceNotFoundException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentExceedsBalanceException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CreditLimitExceededException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CustomerBlockedException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ DuplicateInvoiceException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvalidPaymentAllocationException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ PeriodClosedException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ InvoiceValidationService.kt      # Domain Service
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ PaymentAllocationService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ CreditCheckService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ AgingCalculationService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ DunningSelectionService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ CashApplicationService.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ WriteOffApprovalService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ar-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.finance.ar.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS (Write Operations)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateInvoiceCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ PostInvoiceCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CancelInvoiceCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RecordPaymentCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ApplyPaymentCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ReversePaymentCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ IssueCreditMemoCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ IssueDebitMemoCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ApproveWriteOffCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RunDunningCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ UpdateCreditLimitCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ BlockCustomerCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ UnblockCustomerCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessLockboxCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ GenerateAgingSnapshotCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES (Read Operations)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetInvoiceByIdQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetInvoicesByCustomerQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetOpenInvoicesQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetPaymentHistoryQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetCustomerBalanceQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetAgingReportQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetDunningHistoryQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetCreditStatusQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetCashForecastQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetDSOMetricsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ GetCustomerStatementQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/                  # Driven Ports (Infrastructure)
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ InvoiceRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PaymentRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CustomerAccountRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ DunningRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AgingSnapshotRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ InvoiceReadRepository.kt         # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AgingReadRepository.kt           # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CustomerStatementReadRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ GeneralLedgerPort.kt             # GL posting
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TaxServicePort.kt                # Tax calculation
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ SalesOrderPort.kt                # SO integration
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ BankIntegrationPort.kt           # Lockbox, payments
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ NotificationPort.kt              # Dunning emails
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AuditTrailPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ InvoiceCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ PaymentCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CreditMemoCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ DunningCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CreditManagementCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ LockboxCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ InvoiceQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ PaymentQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ AgingQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ CreditQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ CustomerStatementQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ar-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.finance.ar.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/                    # Primary Adapters
â”‚   â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ InvoiceResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ CreditMemoResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ DunningResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ AgingResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerStatementResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”œâ”€â”€ request/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ CreateInvoiceRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ RecordPaymentRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ApplyPaymentRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IssueCreditMemoRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â””â”€â”€ RunDunningRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â””â”€â”€ response/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ InvoiceDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ InvoiceLineDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ PaymentDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ AgingReportDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ CustomerBalanceDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â””â”€â”€ CustomerStatementDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ event/
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ SalesOrderEventConsumer.kt    # SO fulfilled â†’ Invoice
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ ContractEventConsumer.kt      # Subscription billing
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ BankStatementEventConsumer.kt # Bank reconciliation
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/                   # Secondary Adapters
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/              # Write model (normalized)
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ InvoiceJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ PaymentJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ CustomerAccountJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ InvoiceEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ InvoiceLineEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentAllocationEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerAccountEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CreditMemoEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ DunningRunEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â””â”€â”€ AgingSnapshotEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ InvoiceJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ PaymentJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ CustomerAccountJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ AgingSnapshotJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ reporting/        # Read model (denormalized)
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ AgingReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ CustomerStatementReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ CashForecastReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ document/
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ InvoiceDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ AgingReportDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ CustomerStatementDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â””â”€â”€ DSOMetricsDocument.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ audit/
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ ARImmutableAuditLogAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ integration/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ GLPostingAdapter.kt           # â†’ GL journal entries
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ TaxServiceAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ SalesOrderAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ BankIntegrationAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ kafka/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ AREventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ AREventConsumer.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ schema/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ InvoicePostedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ PaymentReceivedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ DunningGeneratedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ outbox/
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ AROutboxEventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ notification/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ DunningEmailAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ InvoiceEmailAdapter.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ client/
â”‚   â”‚   â”‚               â”‚           â”œâ”€â”€ GeneralLedgerClient.kt
â”‚   â”‚   â”‚               â”‚           â”œâ”€â”€ TaxServiceClient.kt
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ BankingClient.kt
â”‚   â”‚   â”‚               â”œâ”€â”€ configuration/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ ARDependencyInjection.kt
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ PersistenceConfiguration.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ MessagingConfiguration.kt
â”‚   â”‚   â”‚               â””â”€â”€ resources/
â”‚   â”‚   â”‚                   â”œâ”€â”€ application.yml
â”‚   â”‚   â”‚                   â”œâ”€â”€ application-dev.yml
â”‚   â”‚   â”‚                   â”œâ”€â”€ application-prod.yml
â”‚   â”‚   â”‚                   â””â”€â”€ db/
â”‚   â”‚   â”‚                       â””â”€â”€ migration/
â”‚   â”‚   â”‚                           â”œâ”€â”€ V1__create_ar_schema.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V2__create_invoice_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V3__create_payment_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V4__create_customer_account_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V5__create_dunning_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V6__create_aging_tables.sql
â”‚   â”‚   â”‚                           â””â”€â”€ V7__create_ar_audit_tables.sql
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ finance-ap/                          # Accounts Payable Subdomain (ADR-009)
â”‚   â”‚   â”‚   â”œâ”€â”€ ap-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.finance.ap.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ customer/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CustomerAccount.kt       # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CustomerAccountId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CustomerType.kt          # Individual, Corporate, Government
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditProfile.kt         # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditLimit.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditStatus.kt          # Good, Warning, Hold, Blocked
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentTerms.kt          # Net30, Net60, 2/10Net30
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningProfile.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CustomerSegment.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ invoice/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Invoice.kt               # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceLine.kt           # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceLineId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceType.kt           # Standard, Credit, Debit, ProForma
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InvoiceStatus.kt         # Draft, Posted, PartialPaid, Paid, Cancelled
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BillingAddress.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ShippingAddress.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ TaxDetail.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ InvoiceReference.kt      # SO, Contract, Project link
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ payment/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Payment.kt               # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentAllocation.kt     # Entity (payment-to-invoice)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentMethod.kt         # Cash, Check, Wire, ACH, Card
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentStatus.kt         # Pending, Applied, Reversed, Bounced
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BankReference.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Remittance.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CashDiscount.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ aging/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AgingBucket.kt           # Value Object
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AgingSnapshot.kt         # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AgingPeriod.kt           # Current, 1-30, 31-60, 61-90, 90+
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DaysOutstanding.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ AgingCategory.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ dunning/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningRun.kt            # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningRunId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningNotice.kt         # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningLevel.kt          # Reminder, Warning, Final, Legal
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DunningAction.kt         # Letter, Email, Call, Block
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CollectionCase.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ credit/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditMemo.kt            # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditMemoId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditReason.kt          # Return, Pricing, Quality, Goodwill
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DebitMemo.kt             # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ WriteOff.kt              # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ lockbox/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ LockboxBatch.kt          # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ LockboxItem.kt           # Entity
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ RemittanceMatch.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ ExceptionItem.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvoicePostedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvoiceCancelledEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentReceivedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentAppliedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentReversedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CreditMemoIssuedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ WriteOffApprovedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ DunningNoticeGeneratedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CreditLimitExceededEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CustomerBlockedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ AgingSnapshotCreatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvoiceNotFoundException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentExceedsBalanceException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CreditLimitExceededException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CustomerBlockedException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ DuplicateInvoiceException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvalidPaymentAllocationException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ PeriodClosedException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ InvoiceValidationService.kt      # Domain Service
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ PaymentAllocationService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ CreditCheckService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ AgingCalculationService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ DunningSelectionService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ CashApplicationService.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ WriteOffApprovalService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ap-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.finance.ap.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS (Write Operations)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateInvoiceCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ PostInvoiceCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CancelInvoiceCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RecordPaymentCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ApplyPaymentCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ReversePaymentCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ IssueCreditMemoCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ IssueDebitMemoCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ApproveWriteOffCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RunDunningCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ UpdateCreditLimitCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ BlockCustomerCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ UnblockCustomerCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessLockboxCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ GenerateAgingSnapshotCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES (Read Operations)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetInvoiceByIdQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetInvoicesByCustomerQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetOpenInvoicesQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetPaymentHistoryQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetCustomerBalanceQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetAgingReportQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetDunningHistoryQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetCreditStatusQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetCashForecastQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetDSOMetricsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ GetCustomerStatementQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/                  # Driven Ports (Infrastructure)
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ InvoiceRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PaymentRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CustomerAccountRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ DunningRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AgingSnapshotRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ InvoiceReadRepository.kt         # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AgingReadRepository.kt           # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CustomerStatementReadRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ GeneralLedgerPort.kt             # GL posting
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TaxServicePort.kt                # Tax calculation
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ SalesOrderPort.kt                # SO integration
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ BankIntegrationPort.kt           # Lockbox, payments
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ NotificationPort.kt              # Dunning emails
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AuditTrailPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ InvoiceCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ PaymentCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CreditMemoCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ DunningCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CreditManagementCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ LockboxCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ InvoiceQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ PaymentQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ AgingQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ CreditQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ CustomerStatementQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ap-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.finance.ap.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/                    # Primary Adapters
â”‚   â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ InvoiceResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ CreditMemoResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ DunningResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ AgingResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerStatementResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”œâ”€â”€ request/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ CreateInvoiceRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ RecordPaymentRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ApplyPaymentRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ IssueCreditMemoRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â””â”€â”€ RunDunningRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â””â”€â”€ response/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ InvoiceDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ InvoiceLineDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ PaymentDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ AgingReportDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ CustomerBalanceDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â””â”€â”€ CustomerStatementDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ event/
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ SalesOrderEventConsumer.kt    # SO fulfilled â†’ Invoice
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ ContractEventConsumer.kt      # Subscription billing
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ BankStatementEventConsumer.kt # Bank reconciliation
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/                   # Secondary Adapters
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/              # Write model (normalized)
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ InvoiceJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ PaymentJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ CustomerAccountJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ InvoiceEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ InvoiceLineEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentAllocationEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerAccountEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CreditMemoEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ DunningRunEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â””â”€â”€ AgingSnapshotEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ InvoiceJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ PaymentJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ CustomerAccountJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ AgingSnapshotJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ reporting/        # Read model (denormalized)
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ AgingReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ CustomerStatementReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ CashForecastReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ document/
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ InvoiceDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ AgingReportDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ CustomerStatementDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â””â”€â”€ DSOMetricsDocument.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ audit/
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ APImmutableAuditLogAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ integration/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ GLPostingAdapter.kt           # â†’ GL journal entries
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ TaxServiceAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ SalesOrderAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ BankIntegrationAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ kafka/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ APEventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ APEventConsumer.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ schema/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ InvoicePostedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ PaymentReceivedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ DunningGeneratedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ outbox/
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ APOutboxEventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ notification/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ DunningEmailAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ InvoiceEmailAdapter.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ client/
â”‚   â”‚   â”‚               â”‚           â”œâ”€â”€ GeneralLedgerClient.kt
â”‚   â”‚   â”‚               â”‚           â”œâ”€â”€ TaxServiceClient.kt
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ BankingClient.kt
â”‚   â”‚   â”‚               â”œâ”€â”€ configuration/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ APDependencyInjection.kt
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ PersistenceConfiguration.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ MessagingConfiguration.kt
â”‚   â”‚   â”‚               â””â”€â”€ resources/
â”‚   â”‚   â”‚                   â”œâ”€â”€ application.yml
â”‚   â”‚   â”‚                   â”œâ”€â”€ application-dev.yml
â”‚   â”‚   â”‚                   â”œâ”€â”€ application-prod.yml
â”‚   â”‚   â”‚                   â””â”€â”€ db/
â”‚   â”‚   â”‚                       â””â”€â”€ migration/
â”‚   â”‚   â”‚                           â”œâ”€â”€ V1__create_ap_schema.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V2__create_invoice_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V3__create_payment_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V4__create_customer_account_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V5__create_dunning_tables.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V6__create_aging_tables.sql
â”‚   â”‚   â”‚                           â””â”€â”€ V7__create_ap_audit_tables.sql
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ finance-assets/                       # Fixed Assets (ADR-021)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # Fixed Assets (ADR-021)
â”‚   â”‚   â”œâ”€â”€ finance-revenue/                      # Revenue Recognition (ADR-022)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # Revenue Recognition (ADR-022)
â”‚   â”‚   â”œâ”€â”€ finance-tax/                          # Tax Engine (ADR-030)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # Tax Engine (ADR-030)
â”‚   â”‚   â”œâ”€â”€ finance-controlling/                  # Controlling (ADR-028)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # Controlling (ADR-028)
â”‚   â”‚   â”œâ”€â”€ finance-treasury/                     # Treasury (ADR-026)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # Treasury (ADR-026)
â”‚   â”‚   â”œâ”€â”€ finance-intercompany/                 # Intercompany (ADR-029)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # Intercompany (ADR-029)
â”‚   â”‚   â”œâ”€â”€ finance-close/                        # Period Close (ADR-031)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # Period Close (ADR-031)
â”‚   â”‚   â”œâ”€â”€ finance-planning/                     # FP&A (ADR-032)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # FP&A (ADR-032)
â”‚   â”‚   â””â”€â”€ finance-lease/                        # Lease Accounting (ADR-033)
â”‚   â”‚       â””â”€â”€ README.md                         # Lease Accounting (ADR-033)
â”‚   â”‚
â”‚   â”œâ”€â”€ supply-chain/                           # CORE ERP SUPPLY CHAIN (Planned)
â”‚   â”‚   â”œâ”€â”€ procurement/                          # Procurement (ADR-023)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # Procurement (ADR-023)
â”‚   â”‚   â”œâ”€â”€ inventory/                            # Inventory (ADR-024)
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # Inventory (ADR-024)
â”‚   â”‚   â”œâ”€â”€ warehouse-execution/                  # WMS/WES (ADR-038) [Add-on]
â”‚   â”‚   â”‚   â””â”€â”€ README.md                         # WMS/WES (ADR-038)
â”‚   â”‚   â””â”€â”€ master-data/                          # Master Data Governance (ADR-027)
â”‚   â”‚       â””â”€â”€ README.md                         # Master Data Governance (ADR-027)
â”‚   â”‚
â”‚   â”œâ”€â”€ commerce/                                # ğŸ”µ COMMERCE / SALES & DISTRIBUTION (ADR-025) - Port 8085
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ commerce-ecommerce/                  # E-Commerce Subdomain (B2C/D2C Online)
â”‚   â”‚   â”‚   â”œâ”€â”€ ecommerce-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.commerce.ecommerce.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ storefront/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OnlineStore.kt        # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ StoreId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Storefront.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ProductListing.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ SearchFilter.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CategoryTree.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ FacetedNavigation.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ cart/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ShoppingCart.kt       # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CartId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CartItem.kt           # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Wishlist.kt           # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ SavedForLater.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CartExpiration.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ checkout/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Checkout.kt           # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CheckoutId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ShippingMethod.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentMethod.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ GuestCheckout.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AddressValidation.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CheckoutStep.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ order/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OnlineOrder.kt        # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OrderId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OrderLine.kt          # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OrderStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OrderTracking.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DeliveryStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Shipment.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ TrackingNumber.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ promotion/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Promotion.kt          # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PromotionId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CouponCode.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DiscountRule.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PromotionCondition.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ FlashSale.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BundleOffer.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ PromotionValidity.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ review/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ProductReview.kt      # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ReviewId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Rating.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ReviewText.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ReviewModeration.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ReviewVote.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ VerifiedPurchase.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ customer/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ OnlineCustomer.kt     # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CustomerAccount.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ OrderHistory.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PaymentProfile.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ ShippingAddress.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CartAbandonedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ OrderPlacedOnlineEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CheckoutStartedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentFailedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ReviewSubmittedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ WishlistUpdatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ ShipmentDispatchedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CartNotFoundException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CheckoutValidationException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvalidCouponException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ OutOfStockException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ PersonalizationService.kt # Domain Service
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ RecommendationEngine.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ SEOOptimizationService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ PricingEngine.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ InventoryCheckService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ecommerce-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.commerce.ecommerce.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS (Write Operations)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ AddToCartCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ UpdateCartItemCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RemoveFromCartCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CheckoutCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ApplyCouponCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ PlaceOrderCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ SubmitReviewCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES (Read Operations)
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ SearchProductsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetCartQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ TrackOrderQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetProductDetailsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetReviewsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ GetOrderHistoryQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/                  # Driven Ports (Infrastructure)
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CartRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ OrderRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ReviewRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PromotionRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CartReadRepository.kt        # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ OrderReadRepository.kt       # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ProductCatalogPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ InventoryServicePort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PaymentGatewayPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ShippingServicePort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TaxCalculationPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CustomerServicePort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CartCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CheckoutCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ OrderCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ PromotionCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ ReviewCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ CartQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ ProductSearchQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ OrderQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ ReviewQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ecommerce-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.commerce.ecommerce.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/                    # Primary Adapters
â”‚   â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ StorefrontResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ CartResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ CheckoutResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ OrderResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ ReviewResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ ProductSearchResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”œâ”€â”€ request/       # Command DTOs
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ AddToCartRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ CheckoutRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ PlaceOrderRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â””â”€â”€ SubmitReviewRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â””â”€â”€ response/      # Query DTOs
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ CartDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ CartItemDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ OrderDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ ReviewDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â””â”€â”€ ProductSearchResultDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ graphql/
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ ProductResolver.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ CartMutation.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ OrderQuery.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ schema.graphqls
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/                   # Secondary Adapters
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/              # Write model (normalized)
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ CartJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ OrderJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ ReviewJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CartEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CartItemEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ OrderEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ OrderLineEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”‚   â””â”€â”€ ReviewEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ CartJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ OrderJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ ReviewJpaRepository.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ redis/            # Read model cache
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ CartCacheAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ ProductCacheAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ elasticsearch/    # Read model (denormalized)
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ ProductSearchAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ OrderSearchAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ document/
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ ProductDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â””â”€â”€ OrderDocument.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ payment/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ StripeAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ PayPalAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ BraintreeAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ PaymentGatewayMapper.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ shipping/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ ShippoAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ FedExAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ UPSAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ ShippingRateCalculator.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ search/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ ElasticsearchAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ ProductIndexer.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ kafka/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ OrderEventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ CommandEventConsumer.kt  # Updates read models
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ schema/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ OrderPlacedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ PaymentCapturedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ CartAbandonedSchema.avro
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ outbox/
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ OutboxEventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ client/
â”‚   â”‚   â”‚               â”‚           â”œâ”€â”€ InventoryClient.kt
â”‚   â”‚   â”‚               â”‚           â”œâ”€â”€ CustomerClient.kt
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ TaxClient.kt
â”‚   â”‚   â”‚               â”œâ”€â”€ configuration/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ EcommerceDependencyInjection.kt
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ PaymentConfiguration.kt
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ ShippingConfiguration.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ CacheConfiguration.kt
â”‚   â”‚   â”‚               â””â”€â”€ resources/
â”‚   â”‚   â”‚                   â”œâ”€â”€ application.yml
â”‚   â”‚   â”‚                   â”œâ”€â”€ application-dev.yml
â”‚   â”‚   â”‚                   â”œâ”€â”€ application-prod.yml
â”‚   â”‚   â”‚                   â””â”€â”€ db/
â”‚   â”‚   â”‚                       â””â”€â”€ migration/
â”‚   â”‚   â”‚                           â”œâ”€â”€ V1__create_cart_schema.sql
â”‚   â”‚   â”‚                           â”œâ”€â”€ V2__create_order_schema.sql
â”‚   â”‚   â”‚                           â””â”€â”€ V3__create_review_schema.sql
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ commerce-pos/                        # Point of Sale Subdomain (Retail Store)
â”‚   â”‚   â”‚   â”œâ”€â”€ pos-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.commerce.pos.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ transaction/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ POSTransaction.kt      # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ TransactionId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ LineItem.kt            # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ TransactionStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Receipt.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ReceiptNumber.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ TransactionType.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ register/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CashRegister.kt       # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ RegisterId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CashDrawer.kt         # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Shift.kt              # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ShiftId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CashReconciliation.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OpeningFloat.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ClosingBalance.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CashVariance.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ RetailStore.kt        # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ StoreId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ StoreTiming.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ StoreLocation.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Cashier.kt            # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ Terminal.kt           # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ payment/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ POSPayment.kt         # Value Object
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CashPayment.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CardPayment.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ MobilePayment.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ GiftCardPayment.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ SplitPayment.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Tender.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ ChangeAmount.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ loyalty/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ LoyaltyCard.kt        # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ LoyaltyNumber.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PointsBalance.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PointsTransaction.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ RewardRedemption.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ Tier.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ return/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ReturnTransaction.kt  # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ReturnId.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ReturnItem.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ RefundMethod.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ReturnReason.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ReceiptReference.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ RestockingFee.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ SaleCompletedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PaymentProcessedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ShiftOpenedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ShiftClosedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ RefundIssuedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ LoyaltyPointsEarnedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ LoyaltyPointsRedeemedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ CashDrawerOpenedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InsufficientCashException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ShiftNotOpenException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvalidReturnException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ RegisterClosedException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ TenderingService.kt      # Domain Service
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ DiscountCalculationService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ ReceiptGenerationService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ LoyaltyCalculationService.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ CashReconciliationService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ pos-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.commerce.pos.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessSaleCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessPaymentCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ OpenShiftCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CloseShiftCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessReturnCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ApplyDiscountCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RedeemLoyaltyCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ ReconcileCashCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetTransactionQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetShiftSummaryQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetLoyaltyBalanceQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ GetRegisterStatusQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TransactionRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ RegisterRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ShiftRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ LoyaltyRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TransactionReadRepository.kt    # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ShiftReadRepository.kt          # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ InventoryCheckPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PaymentTerminalPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PrinterPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ BarcodeReaderPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CashDrawerPort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ POSTransactionCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ ShiftManagementCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ ReturnCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ LoyaltyCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ PaymentCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ TransactionQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ ShiftQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ LoyaltyQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ pos-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.commerce.pos.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ POSResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ TransactionResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ ShiftResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ ReturnResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”œâ”€â”€ request/       # Command DTOs
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ SaleRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ PaymentRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ReturnRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â””â”€â”€ response/      # Query DTOs
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ TransactionResponse.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â””â”€â”€ ShiftSummaryDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ websocket/
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ POSRealtimeEndpoint.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/              # Write model
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ TransactionJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ ShiftJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ entity/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ POSTransactionEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ ShiftEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ LoyaltyCardEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ mongodb/          # Read model (denormalized)
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ TransactionReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ document/
â”‚   â”‚   â”‚               â”‚       â”‚           â”œâ”€â”€ TransactionSummaryDocument.kt
â”‚   â”‚   â”‚               â”‚       â”‚           â””â”€â”€ ShiftReportDocument.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ hardware/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ CashDrawerAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ BarcodeReaderAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ ReceiptPrinterAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ CardReaderAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ ScaleAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ payment/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ POSPaymentTerminalAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ CardProcessorAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ POSEventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ client/
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ InventoryClient.kt
â”‚   â”‚   â”‚               â””â”€â”€ configuration/
â”‚   â”‚   â”‚                   â”œâ”€â”€ POSConfiguration.kt
â”‚   â”‚   â”‚                   â”œâ”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚                   â””â”€â”€ HardwareConfiguration.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ commerce-b2b/                        # B2B Commerce Subdomain
â”‚   â”‚   â”‚   â”œâ”€â”€ b2b-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.commerce.b2b.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ account/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BusinessAccount.kt    # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ AccountId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CompanyProfile.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ TaxExemption.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CreditLimit.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentTerms.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ AccountStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ buyer/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Buyer.kt              # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BuyerId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BuyerRole.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ApprovalWorkflow.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PurchasingAuthority.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ SpendingLimit.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ contract/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Contract.kt           # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ContractId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ContractTerm.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PricingAgreement.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ VolumeDiscount.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PaymentTerm.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ SLA.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ ContractValidity.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ quote/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Quote.kt              # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ QuoteId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ QuoteRequest.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ QuoteLine.kt          # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ QuoteStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ QuoteValidity.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ Negotiation.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ order/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ B2BOrder.kt           # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ B2BOrderId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ PurchaseOrder.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BlanketOrder.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OrderLine.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ApprovalStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ApprovalChain.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BulkDiscount.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ ScheduledDelivery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ catalog/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ B2BCatalog.kt         # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CatalogId.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CustomPricing.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TierPricing.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ NegotiatedPrice.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ MinimumOrderQuantity.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ QuoteRequestedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ QuoteApprovedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ OrderApprovedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ OrderRejectedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ContractSignedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CreditLimitExceededEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ B2BOrderPlacedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CreditLimitExceededException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ApprovalRequiredException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ContractExpiredException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ InvalidQuoteException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ ApprovalWorkflowService.kt # Domain Service
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ ContractPricingService.kt
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ CreditCheckService.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ QuoteNegotiationService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ b2b-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.commerce.b2b.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateQuoteCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ApproveQuoteCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateB2BOrderCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ApproveOrderCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RejectOrderCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ ManageContractCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ CheckCreditLimitQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetCustomPricingQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetAccountDetailsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetQuoteStatusQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ GetContractDetailsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ B2BOrderRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ QuoteRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ContractRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AccountRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ QuoteReadRepository.kt           # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ AccountReadRepository.kt         # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CreditServicePort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ WorkflowEnginePort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PricingEnginePort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ QuoteCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ B2BOrderCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ ContractCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ AccountCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ QuoteQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ AccountQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ ContractQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ b2b-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.commerce.b2b.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚               â”‚   â”‚   â”œâ”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ B2BOrderResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ QuoteResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ ContractResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â”œâ”€â”€ AccountResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”œâ”€â”€ request/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ QuoteRequestDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ B2BOrderRequestDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ApprovalRequestDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚       â””â”€â”€ response/
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ QuoteResponseDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â”œâ”€â”€ B2BOrderDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â”‚           â””â”€â”€ ContractDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ event/
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ ApprovalEventConsumer.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/              # Write model
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ B2BOrderJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â”œâ”€â”€ QuoteJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ entity/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ B2BOrderEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â”œâ”€â”€ QuoteEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚       â””â”€â”€ ContractEntity.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ postgresql/       # Read model (materialized views)
â”‚   â”‚   â”‚               â”‚       â”‚       â”œâ”€â”€ QuoteReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ AccountReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ workflow/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ CamundaWorkflowAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ ApprovalProcessAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ credit/
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ CreditBureauAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ B2BEventPublisher.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ client/
â”‚   â”‚   â”‚               â”‚           â”œâ”€â”€ CustomerClient.kt
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ FinancialClient.kt
â”‚   â”‚   â”‚               â””â”€â”€ configuration/
â”‚   â”‚   â”‚                   â”œâ”€â”€ B2BConfiguration.kt
â”‚   â”‚   â”‚                   â”œâ”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚                   â””â”€â”€ WorkflowConfiguration.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ commerce-marketplace/                # Marketplace Subdomain (ADR-041)
â”‚   â”‚   â”‚   â”œâ”€â”€ marketplace-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.commerce.marketplace.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ seller/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Seller.kt            # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ SellerId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ SellerProfile.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ SellerRating.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ SellerPerformance.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ SellerStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ VerificationStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ listing/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ProductListing.kt    # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ListingId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ListingStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ListingApproval.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ListingCategory.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ ListingVisibility.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ commission/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Commission.kt        # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CommissionId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CommissionRule.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CommissionTier.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CommissionRate.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ CommissionPayout.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ fulfillment/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ FulfillmentOption.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ SellerFulfillment.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PlatformFulfillment.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ HybridFulfillment.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ SellerOnboardedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ SellerVerifiedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ListingCreatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ListingApprovedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ListingRejectedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ CommissionCalculatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ SellerNotVerifiedException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ListingRejectionException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ InvalidCommissionException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ CommissionCalculationService.kt # Domain Service
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ SellerVerificationService.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ ListingModerationService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ marketplace-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.commerce.marketplace.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ OnboardSellerCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ VerifySellerCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateListingCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ApproveListingCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RejectListingCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ CalculateCommissionCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetSellerPerformanceQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetListingDetailsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ SearchListingsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ GetCommissionReportQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ SellerRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ListingRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CommissionRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ SellerReadRepository.kt          # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ListingReadRepository.kt         # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ SellerCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ ListingCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ MarketplaceCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ CommissionCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ SellerQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ ListingQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ CommissionQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ marketplace-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.commerce.marketplace.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ SellerResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ ListingResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ CommissionResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚           â”œâ”€â”€ request/
â”‚   â”‚   â”‚               â”‚   â”‚           â”‚   â”œâ”€â”€ SellerOnboardingRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚           â”‚   â””â”€â”€ ListingRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚           â””â”€â”€ response/
â”‚   â”‚   â”‚               â”‚   â”‚               â”œâ”€â”€ SellerDto.kt
â”‚   â”‚   â”‚               â”‚   â”‚               â””â”€â”€ ListingDto.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ SellerJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ elasticsearch/     # Read model
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ ListingSearchAdapter.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ MarketplaceEventPublisher.kt
â”‚   â”‚   â”‚               â””â”€â”€ configuration/
â”‚   â”‚   â”‚                   â”œâ”€â”€ MarketplaceConfiguration.kt
â”‚   â”‚   â”‚                   â””â”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ commerce-shared/                     # Shared Commerce Kernel
â”‚   â”‚       â”œâ”€â”€ catalog-shared/
â”‚   â”‚       â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚       â”‚       â””â”€â”€ com.erp.commerce.shared.catalog/
â”‚   â”‚       â”‚           â”œâ”€â”€ Product.kt
â”‚   â”‚       â”‚           â”œâ”€â”€ ProductId.kt
â”‚   â”‚       â”‚           â”œâ”€â”€ SKU.kt
â”‚   â”‚       â”‚           â”œâ”€â”€ Price.kt
â”‚   â”‚       â”‚           â”œâ”€â”€ Category.kt
â”‚   â”‚       â”‚           â””â”€â”€ ProductAttribute.kt
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ pricing-shared/
â”‚   â”‚       â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚       â”‚       â””â”€â”€ com.erp.commerce.shared.pricing/
â”‚   â”‚       â”‚           â”œâ”€â”€ PricingEngine.kt
â”‚   â”‚       â”‚           â”œâ”€â”€ Discount.kt
â”‚   â”‚       â”‚           â”œâ”€â”€ Tax.kt
â”‚   â”‚       â”‚           â””â”€â”€ PriceCalculation.kt
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ order-shared/
â”‚   â”‚           â””â”€â”€ src/main/kotlin/
â”‚   â”‚               â””â”€â”€ com.erp.commerce.shared.order/
â”‚   â”‚                   â”œâ”€â”€ OrderBase.kt
â”‚   â”‚                   â”œâ”€â”€ OrderId.kt
â”‚   â”‚                   â”œâ”€â”€ OrderStatus.kt
â”‚   â”‚                   â””â”€â”€ FulfillmentStatus.kt
â”‚   â”‚
â”‚   â”‚
â”‚   â”œâ”€â”€ manufacturing-execution/                 # ğŸ”µ MANUFACTURING EXECUTION
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ manufacturing-production/            # Production Subdomain (ADR-037)
â”‚   â”‚   â”‚   â”œâ”€â”€ production-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.manufacturing.production.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ workorder/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ WorkOrder.kt          # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ WorkOrderId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ WorkOrderStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ProductionOrder.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ScheduledQuantity.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ ActualQuantity.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ bom/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BillOfMaterials.kt    # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BOMId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BOMLine.kt            # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Component.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ BOMLevel.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ BOMVersion.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ routing/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Routing.kt            # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ RoutingId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Operation.kt          # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ OperationSequence.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ StandardTime.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ shopfloor/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ WorkCenter.kt         # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ WorkCenterId.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ProductionLine.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ Capacity.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ Utilization.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ WorkOrderCreatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ WorkOrderStartedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ WorkOrderCompletedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ ProductionReportedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InsufficientCapacityException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ MissingComponentException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ InvalidRoutingException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ CapacityPlanningService.kt # Domain Service
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ MaterialRequirementService.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ SchedulingService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ production-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.manufacturing.production.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateWorkOrderCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ StartProductionCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RecordProductionCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ CompleteWorkOrderCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetProductionScheduleQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetWorkOrderStatusQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetBOMDetailsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ GetWorkCenterCapacityQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ WorkOrderRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ BOMRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ RoutingRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ WorkOrderReadRepository.kt       # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ InventoryServicePort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ ProductionCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ WorkOrderCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ BOMCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ ProductionQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ WorkOrderQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ production-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.manufacturing.production.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ WorkOrderResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚           â”œâ”€â”€ request/
â”‚   â”‚   â”‚               â”‚   â”‚           â”‚   â””â”€â”€ WorkOrderRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚           â””â”€â”€ response/
â”‚   â”‚   â”‚               â”‚   â”‚               â””â”€â”€ WorkOrderDto.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ WorkOrderJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ timeseries/       # Read model (production metrics)
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ ProductionMetricsAdapter.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ ProductionEventPublisher.kt
â”‚   â”‚   â”‚               â””â”€â”€ configuration/
â”‚   â”‚   â”‚                   â”œâ”€â”€ ProductionConfiguration.kt
â”‚   â”‚   â”‚                   â””â”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ manufacturing-quality/              # Quality Control Subdomain (ADR-039)
â”‚   â”‚   â”‚   â”œâ”€â”€ quality-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.manufacturing.quality.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ inspection/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ QualityControl.kt     # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ QCId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ QCCheckpoint.kt       # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InspectionPlan.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ QualityStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ InspectionResult.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ QualityStandard.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ nonconformance/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ NonConformance.kt     # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ NCRId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DefectType.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CorrectiveAction.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ RootCauseAnalysis.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ certification/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ Certificate.kt        # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ CertificateId.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ Certification.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ QualityCheckPassedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ QualityFailedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ NCRRaisedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ QualityFailureException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ QualityInspectionService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ quality-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.manufacturing.quality.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ PerformQCCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ RaiseNCRCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ IssueCertificateCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetQCResultsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetNCRDetailsQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ GetCertificateQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ QCRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ NCRRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ QCReadRepository.kt              # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ QualityCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ QualityQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ quality-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.manufacturing.quality.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ QualityResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚           â”œâ”€â”€ request/
â”‚   â”‚   â”‚               â”‚   â”‚           â”‚   â””â”€â”€ QCRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚           â””â”€â”€ response/
â”‚   â”‚   â”‚               â”‚   â”‚               â””â”€â”€ QCResultDto.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ QCJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ reporting/        # Read model (quality metrics)
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ QualityReportAdapter.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ QualityEventPublisher.kt
â”‚   â”‚   â”‚               â””â”€â”€ configuration/
â”‚   â”‚   â”‚                   â”œâ”€â”€ QualityConfiguration.kt
â”‚   â”‚   â”‚                   â””â”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ manufacturing-shared/
â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚           â””â”€â”€ com.erp.manufacturing.shared/
â”‚   â”‚               â”œâ”€â”€ ProductionStatus.kt
â”‚   â”‚               â”œâ”€â”€ LotNumber.kt
â”‚   â”‚               â””â”€â”€ SerialNumber.kt
â”‚   â”‚
â”‚   â”‚
â”‚   â”œâ”€â”€ operations-service/                      # ğŸ”µ OPERATIONS SERVICE (Core Domain)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ operations-field-service/            # Field Service Subdomain (ADR-042)
â”‚   â”‚   â”‚   â”œâ”€â”€ field-service-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.operations.fieldservice.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ServiceOrder.kt       # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ServiceOrderId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ WorkOrder.kt          # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ServiceTask.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ServiceItem.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ServiceType.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ OrderPriority.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ dispatch/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Dispatch.kt           # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ DispatchId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Technician.kt         # Entity
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ TechnicianSkill.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Route.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ServiceAppointment.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ TimeWindow.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ rma/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ RMA.kt                # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ RMAId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ReturnReason.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ RMAStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ReturnItem.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ Disposition.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ repair/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ Repair.kt             # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ RepairId.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ RepairType.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ PartUsed.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ LaborHours.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ServiceScheduledEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ TechnicianDispatchedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ ServiceCompletedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PartUsedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ RMACreatedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ RepairCompletedEvent.kt
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ TechnicianUnavailableException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ InvalidTimeWindowException.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ PartNotAvailableException.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ SchedulingService.kt      # Domain Service
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ RouteOptimizationService.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ SkillMatchingService.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ field-service-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.operations.fieldservice.application/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ port/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ command/              # âš¡ COMMANDS
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateServiceOrderCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ScheduleServiceCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ DispatchTechnicianCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CompleteServiceCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CreateRMACommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”‚   â””â”€â”€ RecordRepairCommand.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ query/               # ğŸ” QUERIES
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetTechnicianScheduleQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetServiceOrderQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â”œâ”€â”€ GetRMAStatusQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚       â””â”€â”€ SearchServiceOrdersQuery.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ServiceOrderRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TechnicianRepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ RMARepository.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ ServiceOrderReadRepository.kt    # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ TechnicianReadRepository.kt     # Read model
â”‚   â”‚   â”‚   â”‚           â”‚       â”œâ”€â”€ InventoryServicePort.kt
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ EventPublisherPort.kt
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ service/
â”‚   â”‚   â”‚   â”‚               â”œâ”€â”€ command/                  # Command Handlers
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ ServiceOrderCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ DispatchCommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â”‚   â””â”€â”€ RMACommandHandler.kt
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ query/                    # Query Handlers
â”‚   â”‚   â”‚   â”‚                   â”œâ”€â”€ ServiceOrderQueryHandler.kt
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ TechnicianQueryHandler.kt
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ field-service-infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚           â””â”€â”€ com.erp.operations.fieldservice.infrastructure/
â”‚   â”‚   â”‚               â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚               â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚               â”‚   â”‚   â””â”€â”€ rest/
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ ServiceOrderResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ DispatchResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â”œâ”€â”€ RMAResource.kt
â”‚   â”‚   â”‚               â”‚   â”‚       â””â”€â”€ dto/
â”‚   â”‚   â”‚               â”‚   â”‚           â”œâ”€â”€ request/
â”‚   â”‚   â”‚               â”‚   â”‚           â”‚   â””â”€â”€ ServiceOrderRequest.kt
â”‚   â”‚   â”‚               â”‚   â”‚           â””â”€â”€ response/
â”‚   â”‚   â”‚               â”‚   â”‚               â””â”€â”€ ServiceOrderDto.kt
â”‚   â”‚   â”‚               â”‚   â””â”€â”€ output/
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ jpa/
â”‚   â”‚   â”‚               â”‚       â”‚   â”‚   â””â”€â”€ ServiceOrderJpaAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ mongodb/          # Read model
â”‚   â”‚   â”‚               â”‚       â”‚       â””â”€â”€ ServiceOrderReadAdapter.kt
â”‚   â”‚   â”‚               â”‚       â”œâ”€â”€ routing/
â”‚   â”‚   â”‚               â”‚       â”‚   â””â”€â”€ GoogleMapsAdapter.kt
â”‚   â”‚   â”‚               â”‚       â””â”€â”€ messaging/
â”‚   â”‚   â”‚               â”‚           â””â”€â”€ OperationsEventPublisher.kt
â”‚   â”‚   â”‚               â””â”€â”€ configuration/
â”‚   â”‚   â”‚                   â”œâ”€â”€ FieldServiceConfiguration.kt
â”‚   â”‚   â”‚                   â””â”€â”€ CQRSConfiguration.kt
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ operations-shared/
â”‚   â”‚       â””â”€â”€ src/main/kotlin/
â”‚   â”‚           â””â”€â”€ com.erp.operations.shared/
â”‚   â”‚               â”œâ”€â”€ ServiceType.kt
â”‚   â”‚               â”œâ”€â”€ Priority.kt
â”‚   â”‚               â””â”€â”€ ServiceLocation.kt
â”‚   â”‚
â”‚   â”‚
â”‚   â”œâ”€â”€ customer-relation/                       # ğŸŸ¡ CUSTOMER RELATION (Supporting)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ customer-crm/                        # CRM Master Subdomain (ADR-043) [Add-on]
â”‚   â”‚   â”‚   â”œâ”€â”€ crm-domain/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ src/main/kotlin/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ com.erp.customer.crm.domain/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ customer/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Customer.kt           # Aggregate Root
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CustomerId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CustomerType.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CustomerStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ Contact.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ ContactId.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â”œâ”€â”€ CommunicationPreference.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ ConsentStatus.kt
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ interaction/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ README.md             # Placeholder
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ opportunity/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ README.md             # Placeholder
â”‚   â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ pipeline/
â”‚   â”‚   â”‚   â”‚           â”‚   â”‚   â””â”€â”€ README.md             # Placeholder
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ health/
â”‚   â”‚   â”‚   â”‚           â”‚       â””â”€â”€ README.md             # Placeholder
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ README.md                 # Placeholder
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ exceptions/
â”‚   â”‚   â”‚   â”‚           â”‚   â””â”€â”€ README.md                 # Placeholder
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ services/
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ README.md                 # Placeholder
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ crm-application/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ README.md                             # Placeholder
â”‚   â”‚   â”‚   â”œâ”€â”€ crm-infrastructure/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ README.md                             # Placeholder
â”‚   â”‚   â”‚   â””â”€â”€ README.md                                 # CRM module overview
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ README.md                                     # Customer relation overview
â”‚   â”‚
â”‚   â”œâ”€â”€ hr-integration/                          # ğŸŸ  HR INTEGRATION (Add-on)
â”‚   â”‚   â””â”€â”€ README.md                            # HR Integration & Payroll Events (ADR-034)
â”‚   â”‚
â”‚   â”œâ”€â”€ project-accounting/                      # ğŸŸ  PROJECT ACCOUNTING (Add-on)
â”‚   â”‚   â””â”€â”€ README.md                            # Project Accounting (ADR-036)
â”‚   â”‚
â”‚   â”œâ”€â”€ compliance/                              # ğŸŸ  COMPLIANCE (Add-on)
â”‚   â”‚   â”œâ”€â”€ esg-reporting/                       # ESG & Sustainability (ADR-035)
â”‚   â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚
â”‚   â”œâ”€â”€ operations/                              # ğŸŸ  OPERATIONS (Add-on)
â”‚   â”‚   â”œâ”€â”€ plant-maintenance/                   # Plant Maintenance (ADR-040)
â”‚   â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚   â””â”€â”€ README.md
